import re

def update_services(html_file):
    try:
        with open(html_file, "r", encoding="utf-8") as file:
            content = file.read()

        # Extract the current services section using regex
        services_pattern = re.search(r'(<div class="services-container">)(.*?)(</div>\s*</section>)', content, re.DOTALL)

        if not services_pattern:
            print("Services section not found in the file.")
            return

        # Prompt the user for new services
        services_input = input("Enter services separated by commas (name: description): ").split(",")

        # Trim whitespace and remove empty entries
        services = [service.strip() for service in services_input if service.strip()]

        # Generate new service HTML
        new_services_html = "\n".join([f'''
            <div class="service-box">
                <div class="service-info">
                    <h4>{service.split(':')[0].strip()}</h4>
                    <p>{service.split(':')[1].strip()}</p>
                </div>
            </div>''' for service in services])

        # Replace the existing services section with the new one
        updated_content = re.sub(r'(<div class="services-container">)(.*?)(</div>\s*</section>)',
                                rf'\1\n{new_services_html}\n        \3', content, flags=re.DOTALL)

        # Write the updated HTML back to the file
        with open(html_file, "w", encoding="utf-8") as file:
            file.write(updated_content)

        print("Services section updated successfully!")

    except FileNotFoundError:
        print(f"Error: {html_file} not found!")
    except Exception as e:
        print(f"An error occurred: {e}")
        
# Example usage
update_services("Portfolio_templates/portfolio_template_1.html")  # Replace with the actual path to your HTML file
